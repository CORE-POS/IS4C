<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>CORE POS - IS4C: BasicCCModule Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li><a href="examples.html"><span>Examples</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>BasicCCModule Class Reference</h1><!-- doxytag: class="BasicCCModule" --><a href="class_basic_c_c_module-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#793d5da4e613d08253f0bd35986546cd">BasicCCModule</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#6a87d1cc9b09121ce84451dda9ef4d65">handlesType</a> ($type)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#7f1370cc0fbf676b734aa4d49a245c6c">entered</a> ($validate, $json=array())</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#c564dbb28b4fe7164c03e0ef8590a7fb">doSend</a> ($type)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#3c9639a28e94cbaf4af70d692bc2d688">cleanup</a> ($json=array())</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#4bd58b901a7803bde7ee88c107f40110">paycard_void</a> ($transID, $laneNo=-1, $transNo=-1, $json=array())</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#8e8dbf8d8b07ccd4a22f21d6ac4eeb68">curlSend</a> ($data=False, $type='POST', $xml=False)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#f35ec59255c8b8631bded02dac845237">handleResponse</a> ($response)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#72b273baf34b2b4dad5be38fd5e2602f">refnum</a> ($transID)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#ef742dcbcaba51c4522d56ef69a0ee6a">array2post</a> ($parray)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#0b3ba58e56d3aba1b4f521a1b4bb6fa3">soapify</a> ($action, $objs, $namespace=&quot;&quot;, $encode_tags=True)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#814ae6eddcbd43301e893c59fd75d296">desoapify</a> ($action, $soaptext)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#332bb01dc348d250f38321feb13699b5">setErrorMsg</a> ($errorCode)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#b43c446a9302435ad93f7007fccae80e">setPAN</a> ($in)</td></tr>

<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="256a9240a1e210427494032cbc9a7fc9"></a><!-- doxytag: member="BasicCCModule::$GATEWAY" ref="256a9240a1e210427494032cbc9a7fc9" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>$GATEWAY</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5f2c57d0fc13635ac38bab4512444421"></a><!-- doxytag: member="BasicCCModule::$SOAPACTION" ref="5f2c57d0fc13635ac38bab4512444421" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>$SOAPACTION</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#d54f013db0d801bfc2e0f367c6206ce1">$SOAP_ENVELOPE_ATTRS</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ed78fedc509ee40144dd30db259e995b"></a><!-- doxytag: member="BasicCCModule::$trans_pan" ref="ed78fedc509ee40144dd30db259e995b" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>$trans_pan</b></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Generic Credit Card processing module<p>
All payment processing modules should descend from this class. Required methods are:<ul>
<li><a class="el" href="class_basic_c_c_module.html#6a87d1cc9b09121ce84451dda9ef4d65">handlesType()</a></li><li><a class="el" href="class_basic_c_c_module.html#c564dbb28b4fe7164c03e0ef8590a7fb">doSend()</a></li><li><a class="el" href="class_basic_c_c_module.html#3c9639a28e94cbaf4af70d692bc2d688">cleanup()</a></li></ul>
<p>
Additionally, while they technically may be omitted in the subclass, it is strongly recommended that module implement its own:<ul>
<li><a class="el" href="class_basic_c_c_module.html#7f1370cc0fbf676b734aa4d49a245c6c">entered()</a></li><li><a class="el" href="class_basic_c_c_module.html#4bd58b901a7803bde7ee88c107f40110">paycard_void()</a></li></ul>
<p>
The rest is utility methods that are often helpful. 
<p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="ef742dcbcaba51c4522d56ef69a0ee6a"></a><!-- doxytag: member="BasicCCModule::array2post" ref="ef742dcbcaba51c4522d56ef69a0ee6a" args="($parray)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::array2post           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>parray</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
urlencodes the given array for use with curl <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$parray</em>&nbsp;</td><td>keyed array </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>formatted string </dd></dl>

</div>
</div><p>
<a class="anchor" name="793d5da4e613d08253f0bd35986546cd"></a><!-- doxytag: member="BasicCCModule::BasicCCModule" ref="793d5da4e613d08253f0bd35986546cd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::BasicCCModule           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Constructor takes no arguments otherwise, do whatever you want here 
</div>
</div><p>
<a class="anchor" name="3c9639a28e94cbaf4af70d692bc2d688"></a><!-- doxytag: member="BasicCCModule::cleanup" ref="3c9639a28e94cbaf4af70d692bc2d688" args="($json=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::cleanup           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>json</em> = <code>array()</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function is called when <a class="el" href="class_basic_c_c_module.html#c564dbb28b4fe7164c03e0ef8590a7fb">doSend()</a> returns PaycardLib::PAYCARD_ERR_OK.<p>
I use it for tendering, printing receipts, etc, but it's really only for code cleanliness. You could leave this as is and do all the everything inside <a class="el" href="class_basic_c_c_module.html#c564dbb28b4fe7164c03e0ef8590a7fb">doSend()</a> 
</div>
</div><p>
<a class="anchor" name="8e8dbf8d8b07ccd4a22f21d6ac4eeb68"></a><!-- doxytag: member="BasicCCModule::curlSend" ref="8e8dbf8d8b07ccd4a22f21d6ac4eeb68" args="($data=False, $type='POST', $xml=False)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::curlSend           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>data</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>type</em> = <code>'POST'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>xml</em> = <code>False</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send a curl request with the specified data. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$data</em>&nbsp;</td><td>string of data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$type</em>&nbsp;</td><td>'GET', 'POST', or 'SOAP' </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$xml</em>&nbsp;</td><td>True or False </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>integer error code</dd></dl>
The url should be specified in $this-&gt;GATEWAY. SOAP requests should aso set $this-&gt;$SOAPACTION.<p>
Data is usually a string of XML or an HTTP argument like key1=val1&amp;key2=val2... Setting xml to True adds an content-type header<p>
This function calls the handleResponse method and returns the result of that call. 
</div>
</div><p>
<a class="anchor" name="814ae6eddcbd43301e893c59fd75d296"></a><!-- doxytag: member="BasicCCModule::desoapify" ref="814ae6eddcbd43301e893c59fd75d296" args="($action, $soaptext)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::desoapify           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>soaptext</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Extract response from a soap envelope <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$action</em>&nbsp;</td><td>is the top level tag in the soap body </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$soaptext</em>&nbsp;</td><td>is the full soap response </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="c564dbb28b4fe7164c03e0ef8590a7fb"></a><!-- doxytag: member="BasicCCModule::doSend" ref="c564dbb28b4fe7164c03e0ef8590a7fb" args="($type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::doSend           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>type</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Process the paycard request and return an error value as defined in paycardLib.php. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$type</em>&nbsp;</td><td>paycard type </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><ul>
<li>On success, return PaycardLib::PAYCARD_ERR_OK.</li><li>On failure, return anything else and set any error messages to be displayed in $CORE_LOCAL-&gt;["boxMsg"].</li></ul>
</dd></dl>
This function should submit a request to the gateway and process the result. By convention credit card request and response info is stored in the efsnet* tables and gift card request and response info is stored in the valutec* tables.<p>
<b>Do not store full card number when logging request and response info</b>. 
</div>
</div><p>
<a class="anchor" name="7f1370cc0fbf676b734aa4d49a245c6c"></a><!-- doxytag: member="BasicCCModule::entered" ref="7f1370cc0fbf676b734aa4d49a245c6c" args="($validate, $json=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::entered           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>validate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>json</em> = <code>array()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set up transaction and validate if desired <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$validate</em>&nbsp;</td><td>boolean </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$json</em>&nbsp;</td><td>A keyed array </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>An array see <a class="el" href="class_parser.html#a25abc3d3a5407d364ef11cf11baa04a">Parser::default_json()</a> for formatting.</dd></dl>
This function typically does some validation and sets some values in the session.<p>
If you have 'output' defined in the return array, that gets shown as an error message. If you set a URL in 'main_frame', POS might go there but it's not guaranteed. 
</div>
</div><p>
<a class="anchor" name="f35ec59255c8b8631bded02dac845237"></a><!-- doxytag: member="BasicCCModule::handleResponse" ref="f35ec59255c8b8631bded02dac845237" args="($response)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::handleResponse           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>response</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Processes data fetched by $this-&gt;<a class="el" href="class_basic_c_c_module.html#8e8dbf8d8b07ccd4a22f21d6ac4eeb68">curlSend()</a> <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$response</em>&nbsp;</td><td>is a keyed array with:<ul>
<li>curlErr cURL error code</li><li>curlErrText cURL error message</li><li>curlTime time spent fetching response</li><li>curlHTTP response HTTP code</li><li>response is the actual text result </li></ul>
</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>An error code. Constants are specified in paycardLib.php. PaycardLib::PAYCARD_ERR_OK should be return on success. </dd></dl>

</div>
</div><p>
<a class="anchor" name="6a87d1cc9b09121ce84451dda9ef4d65"></a><!-- doxytag: member="BasicCCModule::handlesType" ref="6a87d1cc9b09121ce84451dda9ef4d65" args="($type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::handlesType           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>type</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check whether module handles this paycard type <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$type</em>&nbsp;</td><td>the type </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>True or False</dd></dl>
Type constants are defined in paycardLib.php. 
</div>
</div><p>
<a class="anchor" name="4bd58b901a7803bde7ee88c107f40110"></a><!-- doxytag: member="BasicCCModule::paycard_void" ref="4bd58b901a7803bde7ee88c107f40110" args="($transID, $laneNo=-1, $transNo=-1, $json=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::paycard_void           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>transID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>laneNo</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>transNo</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>json</em> = <code>array()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Validation and setup for void transactions <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$transID</em>&nbsp;</td><td>original transaction ID </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$laneNo</em>&nbsp;</td><td>original transaction laneNo value </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$transNo</em>&nbsp;</td><td>original transaction transNo value </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$json</em>&nbsp;</td><td>keyed array </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>An array see <a class="el" href="class_parser.html#a25abc3d3a5407d364ef11cf11baa04a">Parser::default_json()</a> for formatting</dd></dl>
This function is similar to <a class="el" href="class_basic_c_c_module.html#7f1370cc0fbf676b734aa4d49a245c6c">entered()</a>. Typically with a void there is additional validation to check the status of the original transaction before proceeding. 
</div>
</div><p>
<a class="anchor" name="72b273baf34b2b4dad5be38fd5e2602f"></a><!-- doxytag: member="BasicCCModule::refnum" ref="72b273baf34b2b4dad5be38fd5e2602f" args="($transID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::refnum           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>transID</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a reference number from session variables. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$transID</em>&nbsp;</td><td>current trans_id in localtemptrans </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>A string CCCCLLNNNIII where<ul>
<li>CCCC is cashier number</li><li>LL is lane number</li><li>NNN is transaction number</li><li>III is transaction ID </li></ul>
</dd></dl>

</div>
</div><p>
<a class="anchor" name="332bb01dc348d250f38321feb13699b5"></a><!-- doxytag: member="BasicCCModule::setErrorMsg" ref="332bb01dc348d250f38321feb13699b5" args="($errorCode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::setErrorMsg           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>errorCode</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$errorCode</em>&nbsp;</td><td>error code contstant from paycardLib.php</td></tr>
  </table>
</dl>
Set $CORE_LOCAL-&gt;["boxMsg"] appropriately for the given error code. I find this easier than manually setting an appropriate message every time I return a common error like PaycardLib::PAYCARD_ERR_NOSEND. I think everything but PaycardLib::PAYCARD_ERR_PROC can have one default message assigned here 
</div>
</div><p>
<a class="anchor" name="b43c446a9302435ad93f7007fccae80e"></a><!-- doxytag: member="BasicCCModule::setPAN" ref="b43c446a9302435ad93f7007fccae80e" args="($in)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::setPAN           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>in</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Store card data in class member $trans_pan. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$in</em>&nbsp;</td><td>is a keyed array:<ul>
<li>pan is the card number</li><li>tr1 is magnetic stripe track 1, if available</li><li>tr2 is magnetic stripe track 2, if available</li><li>tr3 is magnetic stripe track 3, if available</li></ul>
</td></tr>
  </table>
</dl>
Recommended for credit card modules. Card data can be populated at the last possible moment before calling doSend and expunged again once the request has been submitted to the gateway. 
</div>
</div><p>
<a class="anchor" name="0b3ba58e56d3aba1b4f521a1b4bb6fa3"></a><!-- doxytag: member="BasicCCModule::soapify" ref="0b3ba58e56d3aba1b4f521a1b4bb6fa3" args="($action, $objs, $namespace=&quot;&quot;, $encode_tags=True)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::soapify           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>objs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>namespace</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>encode_tags</em> = <code>True</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Put objects into a soap envelope <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$action</em>&nbsp;</td><td>top level tag in the soap body </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$objs</em>&nbsp;</td><td>keyed array of values </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$namespace</em>&nbsp;</td><td>include an xmlns attribute </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>soap string </dd></dl>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="d54f013db0d801bfc2e0f367c6206ce1"></a><!-- doxytag: member="BasicCCModule::$SOAP_ENVELOPE_ATTRS" ref="d54f013db0d801bfc2e0f367c6206ce1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::$SOAP_ENVELOPE_ATTRS<code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> array(
                <span class="stringliteral">"xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\""</span>,
                <span class="stringliteral">"xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\""</span>,
                <span class="stringliteral">"xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\""</span>
                )
</pre></div>Envelope attributes for SOAP. 
</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>pos/is4c-nf/cc-modules/BasicCCModule.php</ul>
<hr size="1"><address style="align: right;"><small>Generated on Tue Oct 23 14:30:34 2012 for CORE POS - IS4C by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
