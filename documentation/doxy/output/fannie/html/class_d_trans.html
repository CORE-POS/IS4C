<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>CORE POS - Fannie: DTrans Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li><a href="examples.html"><span>Examples</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>DTrans Class Reference</h1><!-- doxytag: class="DTrans" --><a href="class_d_trans-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_trans.html#0f0c207d673e2f57a7ed2bfff77706ff">parameterize</a> ($arr, $datecol='', $datefunc='')</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_trans.html#07c16194e09dc7f753ab7f702121506d">isTesting</a> ($prefix='')</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_trans.html#8c97c5a59f2a77affea9cd737a213f0a">isNotTesting</a> ($prefix='')</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_trans.html#ffc9eee84f997bfa9ab18c60d55b27a5">isCanceled</a> ($prefix='')</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_trans.html#9e67e124f90b90b77c7eee3c21d0ae1c">isValid</a> ($prefix='')</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_trans.html#27edd74ec9fbe7e723a933d879eef972">isStoreID</a> ($store_id, $prefix='')</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_trans.html#65d8c99ae6b25499eb0bc2f2bd3daf6c">sumQuantity</a> ($prefix='')</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_trans.html#2135db566f5e51f1813982bda4957633">joinProducts</a> ($dlog_alias='t', $product_alias='p', $join_type='left')</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_trans.html#ef4d027641dfdbdc7875011e757d5952">joinDepartments</a> ($dlog_alias='t', $dept_alias='d')</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_trans.html#a8fbbc1f2dbb96bcf56b944f98228de9">joinCustdata</a> ($dlog_alias='t', $cust_alias='c')</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_trans.html#f943352cf6c3e14ba3efe68f6df8cc88">joinTenders</a> ($dlog_alias='t', $tender_alias='n')</td></tr>

<tr><td colspan="2"><br><h2>Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_trans.html#56a648a650dfa1229ee0215a97516acf">$DEFAULTS</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Helper class for generating useful bits of transaction SQL 
<p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="ffc9eee84f997bfa9ab18c60d55b27a5"></a><!-- doxytag: member="DTrans::isCanceled" ref="ffc9eee84f997bfa9ab18c60d55b27a5" args="($prefix='')" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static DTrans::isCanceled           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>prefix</em> = <code>''</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get SQL condition to select canceled transactions <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$prefix</em>&nbsp;</td><td>[optional] table alias </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>string SQL snippet </dd></dl>

</div>
</div><p>
<a class="anchor" name="8c97c5a59f2a77affea9cd737a213f0a"></a><!-- doxytag: member="DTrans::isNotTesting" ref="8c97c5a59f2a77affea9cd737a213f0a" args="($prefix='')" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static DTrans::isNotTesting           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>prefix</em> = <code>''</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get SQL condition to select non-testing transactions <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$prefix</em>&nbsp;</td><td>[optional] table alias </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>string SQL snippet </dd></dl>

</div>
</div><p>
<a class="anchor" name="27edd74ec9fbe7e723a933d879eef972"></a><!-- doxytag: member="DTrans::isStoreID" ref="27edd74ec9fbe7e723a933d879eef972" args="($store_id, $prefix='')" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static DTrans::isStoreID           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>store_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>prefix</em> = <code>''</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get SQL condition to select transactions with the given store ID. Store ID must be passed to the resulting prepared statement as an argument 
</div>
</div><p>
<a class="anchor" name="07c16194e09dc7f753ab7f702121506d"></a><!-- doxytag: member="DTrans::isTesting" ref="07c16194e09dc7f753ab7f702121506d" args="($prefix='')" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static DTrans::isTesting           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>prefix</em> = <code>''</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get SQL condition to select testing transactions <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$prefix</em>&nbsp;</td><td>[optional] table alias </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>string SQL snippet </dd></dl>

</div>
</div><p>
<a class="anchor" name="9e67e124f90b90b77c7eee3c21d0ae1c"></a><!-- doxytag: member="DTrans::isValid" ref="9e67e124f90b90b77c7eee3c21d0ae1c" args="($prefix='')" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static DTrans::isValid           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>prefix</em> = <code>''</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get SQL condition to select valid transactions This is essentially the opposite of "isCanceled" but excludes some additional informational rows that provide commentary but do not impact numeric totals <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$prefix</em>&nbsp;</td><td>[optional] table alias </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>string SQL snippet </dd></dl>

</div>
</div><p>
<a class="anchor" name="a8fbbc1f2dbb96bcf56b944f98228de9"></a><!-- doxytag: member="DTrans::joinCustdata" ref="a8fbbc1f2dbb96bcf56b944f98228de9" args="($dlog_alias='t', $cust_alias='c')" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static DTrans::joinCustdata           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>dlog_alias</em> = <code>'t'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>cust_alias</em> = <code>'c'</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get join statement for custdata table <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$dlog_alias</em>&nbsp;</td><td>[optional] alias for the transaction table (default 't') </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$cust_alias</em>&nbsp;</td><td>[optional] alias for the custdata table (default 'c') </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>string SQL snippet </dd></dl>

</div>
</div><p>
<a class="anchor" name="ef4d027641dfdbdc7875011e757d5952"></a><!-- doxytag: member="DTrans::joinDepartments" ref="ef4d027641dfdbdc7875011e757d5952" args="($dlog_alias='t', $dept_alias='d')" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static DTrans::joinDepartments           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>dlog_alias</em> = <code>'t'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>dept_alias</em> = <code>'d'</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get join statement for departments table <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$dlog_alias</em>&nbsp;</td><td>[optional] alias for the transaction table (default 't') </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$dept_alias</em>&nbsp;</td><td>[optional] alias for the departments table (default 'd') </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>string SQL snippet </dd></dl>

</div>
</div><p>
<a class="anchor" name="2135db566f5e51f1813982bda4957633"></a><!-- doxytag: member="DTrans::joinProducts" ref="2135db566f5e51f1813982bda4957633" args="($dlog_alias='t', $product_alias='p', $join_type='left')" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static DTrans::joinProducts           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>dlog_alias</em> = <code>'t'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>product_alias</em> = <code>'p'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>join_type</em> = <code>'left'</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get join statement for products table <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$dlog_alias</em>&nbsp;</td><td>[optional] alias for the transaction table (default 't') </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$product_alias</em>&nbsp;</td><td>[optional] alias for the products table (default 'p') </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>string SQL snippet </dd></dl>

</div>
</div><p>
<a class="anchor" name="f943352cf6c3e14ba3efe68f6df8cc88"></a><!-- doxytag: member="DTrans::joinTenders" ref="f943352cf6c3e14ba3efe68f6df8cc88" args="($dlog_alias='t', $tender_alias='n')" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static DTrans::joinTenders           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>dlog_alias</em> = <code>'t'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>tender_alias</em> = <code>'n'</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get join statement for tenders table <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$dlog_alias</em>&nbsp;</td><td>[optional] alias for the transaction table (default 't') </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$tender_alias</em>&nbsp;</td><td>[optional] alias for the tenders table (default 'n') </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>string SQL snippet </dd></dl>

</div>
</div><p>
<a class="anchor" name="0f0c207d673e2f57a7ed2bfff77706ff"></a><!-- doxytag: member="DTrans::parameterize" ref="0f0c207d673e2f57a7ed2bfff77706ff" args="($arr, $datecol='', $datefunc='')" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static DTrans::parameterize           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>arr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>datecol</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>datefunc</em> = <code>''</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Turn an key=&gt;value array into useful SQL bits <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$arr</em>&nbsp;</td><td>array of column_name =&gt; column_value </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$datecol</em>&nbsp;</td><td>[optional] name of datetime column </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$datefunc</em>&nbsp;</td><td>[optional] string database function for current datetime </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>keyed array<ul>
<li>columnString =&gt; comma separated list of columns</li><li>valueString =&gt; comma separated list of ? placeholders</li><li>arguments =&gt; array of query parameters </li></ul>
</dd></dl>

</div>
</div><p>
<a class="anchor" name="65d8c99ae6b25499eb0bc2f2bd3daf6c"></a><!-- doxytag: member="DTrans::sumQuantity" ref="65d8c99ae6b25499eb0bc2f2bd3daf6c" args="($prefix='')" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static DTrans::sumQuantity           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>prefix</em> = <code>''</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get standard quantity sum. Member-discount line items are excluded and quasi-scalabe items with a unitPrice of a penny are counted as one instead of whatever value is in the quantity field. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$prefix</em>&nbsp;</td><td>[optional] table alias </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>string SQL snippet </dd></dl>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="56a648a650dfa1229ee0215a97516acf"></a><!-- doxytag: member="DTrans::$DEFAULTS" ref="56a648a650dfa1229ee0215a97516acf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DTrans::$DEFAULTS<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Array of default values for dtransaction-style tables The column 'datetime' is ommitted. Normally an SQL function like NOW() is used there and cannot be a parameter 
</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>fannie/classlib2.0/data/DTrans.php</ul>
<hr size="1"><address style="align: right;"><small>Generated on 11 Sep 2014 for CORE POS - Fannie by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
