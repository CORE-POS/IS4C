<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>CORE POS - Fannie: BasicCCModule Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li><a href="examples.html"><span>Examples</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>BasicCCModule Class Reference</h1><!-- doxytag: class="BasicCCModule" --><a href="class_basic_c_c_module-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#306ae51dbc942af775944e68b9c1439c">BasicCCModule</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#12345229c3af8f30277781872f0ea5cc">handlesType</a> ($type)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#176c5316988c80fe05e862bac957fff5">entered</a> ($validate, $json)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#55a1b019cfc7a5990ee96d19b58bc8eb">doSend</a> ($type)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#dd28a205cbccdd3f7a092d789a9028e8">cleanup</a> ($json)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#a4835167fcf53d410cfbf07a28374d6f">paycard_void</a> ($transID, $laneNo=-1, $transNo=-1, $json=array())</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#d9be12843f5e4514a9c9f523dfcb0c4c">curlSend</a> ($data=False, $type='POST', $xml=False)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#ea8c69e2e0435a7235546f4ee83dd769">handleResponse</a> ($response)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#f08b1469e2822372085ffd8d0b8854e6">refnum</a> ($transID)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#aecdc3fde76694a3edbf6d65b2b9a42b">array2post</a> ($parray)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#c60b2002a84333a0f8447f8ea951c721">soapify</a> ($action, $objs, $namespace=&quot;&quot;, $encode_tags=True)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#126aa231b51bc3dbeede335825a3cb5f">desoapify</a> ($action, $soaptext)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#0db0bdf595bb6b05e61e4a2c1100414f">setErrorMsg</a> ($errorCode)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#6f7b2ad9c70f2eb17d1eca04c20c797f">setPAN</a> ($in)</td></tr>

<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="dcb34e4d9624222f0e287ed1607798eb"></a><!-- doxytag: member="BasicCCModule::$GATEWAY" ref="dcb34e4d9624222f0e287ed1607798eb" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>$GATEWAY</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="39c806737b9849eb4b148e19e5171791"></a><!-- doxytag: member="BasicCCModule::$SOAPACTION" ref="39c806737b9849eb4b148e19e5171791" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>$SOAPACTION</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_c_c_module.html#f4cb934e3861a5cfcd8d1b0ec231dc30">$SOAP_ENVELOPE_ATTRS</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="059f97fd4725e4795a86ec4a1deb2e01"></a><!-- doxytag: member="BasicCCModule::$trans_pan" ref="059f97fd4725e4795a86ec4a1deb2e01" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>$trans_pan</b></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Generic Credit Card processing module<p>
All payment processing modules should descend from this class. Required methods are:<ul>
<li><a class="el" href="class_basic_c_c_module.html#12345229c3af8f30277781872f0ea5cc">handlesType()</a></li><li><a class="el" href="class_basic_c_c_module.html#55a1b019cfc7a5990ee96d19b58bc8eb">doSend()</a></li><li><a class="el" href="class_basic_c_c_module.html#dd28a205cbccdd3f7a092d789a9028e8">cleanup()</a></li></ul>
<p>
Additionally, while they technically may be omitted in the subclass, it is strongly recommended that module implement its own:<ul>
<li><a class="el" href="class_basic_c_c_module.html#176c5316988c80fe05e862bac957fff5">entered()</a></li><li><a class="el" href="class_basic_c_c_module.html#a4835167fcf53d410cfbf07a28374d6f">paycard_void()</a></li></ul>
<p>
The rest is utility methods that are often helpful. 
<p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="aecdc3fde76694a3edbf6d65b2b9a42b"></a><!-- doxytag: member="BasicCCModule::array2post" ref="aecdc3fde76694a3edbf6d65b2b9a42b" args="($parray)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::array2post           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>parray</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
urlencodes the given array for use with curl <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$parray</em>&nbsp;</td><td>keyed array </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>formatted string </dd></dl>

</div>
</div><p>
<a class="anchor" name="306ae51dbc942af775944e68b9c1439c"></a><!-- doxytag: member="BasicCCModule::BasicCCModule" ref="306ae51dbc942af775944e68b9c1439c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::BasicCCModule           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Constructor takes no arguments otherwise, do whatever you want here 
</div>
</div><p>
<a class="anchor" name="dd28a205cbccdd3f7a092d789a9028e8"></a><!-- doxytag: member="BasicCCModule::cleanup" ref="dd28a205cbccdd3f7a092d789a9028e8" args="($json)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::cleanup           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>json</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function is called when <a class="el" href="class_basic_c_c_module.html#55a1b019cfc7a5990ee96d19b58bc8eb">doSend()</a> returns PaycardLib::PAYCARD_ERR_OK.<p>
I use it for tendering, printing receipts, etc, but it's really only for code cleanliness. You could leave this as is and do all the everything inside <a class="el" href="class_basic_c_c_module.html#55a1b019cfc7a5990ee96d19b58bc8eb">doSend()</a> 
</div>
</div><p>
<a class="anchor" name="d9be12843f5e4514a9c9f523dfcb0c4c"></a><!-- doxytag: member="BasicCCModule::curlSend" ref="d9be12843f5e4514a9c9f523dfcb0c4c" args="($data=False, $type='POST', $xml=False)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::curlSend           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>data</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>type</em> = <code>'POST'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>xml</em> = <code>False</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send a curl request with the specified data. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$data</em>&nbsp;</td><td>string of data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$type</em>&nbsp;</td><td>'GET', 'POST', or 'SOAP' </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$xml</em>&nbsp;</td><td>True or False </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>integer error code</dd></dl>
The url should be specified in $this-&gt;GATEWAY. SOAP requests should aso set $this-&gt;$SOAPACTION.<p>
Data is usually a string of XML or an HTTP argument like key1=val1&amp;key2=val2... Setting xml to True adds an content-type header<p>
This function calls the handleResponse method and returns the result of that call. 
</div>
</div><p>
<a class="anchor" name="126aa231b51bc3dbeede335825a3cb5f"></a><!-- doxytag: member="BasicCCModule::desoapify" ref="126aa231b51bc3dbeede335825a3cb5f" args="($action, $soaptext)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::desoapify           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>soaptext</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Extract response from a soap envelope <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$action</em>&nbsp;</td><td>is the top level tag in the soap body </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$soaptext</em>&nbsp;</td><td>is the full soap response </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="55a1b019cfc7a5990ee96d19b58bc8eb"></a><!-- doxytag: member="BasicCCModule::doSend" ref="55a1b019cfc7a5990ee96d19b58bc8eb" args="($type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::doSend           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>type</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Process the paycard request and return an error value as defined in paycardLib.php. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$type</em>&nbsp;</td><td>paycard type </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><ul>
<li>On success, return PaycardLib::PAYCARD_ERR_OK.</li><li>On failure, return anything else and set any error messages to be displayed in $CORE_LOCAL-&gt;["boxMsg"].</li></ul>
</dd></dl>
This function should submit a request to the gateway and process the result. By convention credit card request and response info is stored in the efsnet* tables and gift card request and response info is stored in the valutec* tables.<p>
<b>Do not store full card number when logging request and response info</b>. 
</div>
</div><p>
<a class="anchor" name="176c5316988c80fe05e862bac957fff5"></a><!-- doxytag: member="BasicCCModule::entered" ref="176c5316988c80fe05e862bac957fff5" args="($validate, $json)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::entered           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>validate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>json</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set up transaction and validate if desired <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$validate</em>&nbsp;</td><td>boolean </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$json</em>&nbsp;</td><td>A keyed array </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>An array see Parser::default_json() for formatting.</dd></dl>
This function typically does some validation and sets some values in the session.<p>
If you have 'output' defined in the return array, that gets shown as an error message. If you set a URL in 'main_frame', POS might go there but it's not guaranteed. 
</div>
</div><p>
<a class="anchor" name="ea8c69e2e0435a7235546f4ee83dd769"></a><!-- doxytag: member="BasicCCModule::handleResponse" ref="ea8c69e2e0435a7235546f4ee83dd769" args="($response)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::handleResponse           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>response</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Processes data fetched by $this-&gt;<a class="el" href="class_basic_c_c_module.html#d9be12843f5e4514a9c9f523dfcb0c4c">curlSend()</a> <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$response</em>&nbsp;</td><td>is a keyed array with:<ul>
<li>curlErr cURL error code</li><li>curlErrText cURL error message</li><li>curlTime time spent fetching response</li><li>curlHTTP response HTTP code</li><li>response is the actual text result </li></ul>
</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>An error code. Constants are specified in paycardLib.php. PaycardLib::PAYCARD_ERR_OK should be return on success. </dd></dl>

</div>
</div><p>
<a class="anchor" name="12345229c3af8f30277781872f0ea5cc"></a><!-- doxytag: member="BasicCCModule::handlesType" ref="12345229c3af8f30277781872f0ea5cc" args="($type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::handlesType           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>type</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check whether module handles this paycard type <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$type</em>&nbsp;</td><td>the type </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>True or False</dd></dl>
Type constants are defined in paycardLib.php. 
</div>
</div><p>
<a class="anchor" name="a4835167fcf53d410cfbf07a28374d6f"></a><!-- doxytag: member="BasicCCModule::paycard_void" ref="a4835167fcf53d410cfbf07a28374d6f" args="($transID, $laneNo=-1, $transNo=-1, $json=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::paycard_void           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>transID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>laneNo</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>transNo</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>json</em> = <code>array()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Validation and setup for void transactions <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$transID</em>&nbsp;</td><td>original transaction ID </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$laneNo</em>&nbsp;</td><td>original transaction laneNo value </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$transNo</em>&nbsp;</td><td>original transaction transNo value </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$json</em>&nbsp;</td><td>keyed array </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>An array see Parser::default_json() for formatting</dd></dl>
This function is similar to <a class="el" href="class_basic_c_c_module.html#176c5316988c80fe05e862bac957fff5">entered()</a>. Typically with a void there is additional validation to check the status of the original transaction before proceeding. 
</div>
</div><p>
<a class="anchor" name="f08b1469e2822372085ffd8d0b8854e6"></a><!-- doxytag: member="BasicCCModule::refnum" ref="f08b1469e2822372085ffd8d0b8854e6" args="($transID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::refnum           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>transID</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a reference number from session variables. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$transID</em>&nbsp;</td><td>current trans_id in localtemptrans </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>A string CCCCLLNNNIII where<ul>
<li>CCCC is cashier number</li><li>LL is lane number</li><li>NNN is transaction number</li><li>III is transaction ID </li></ul>
</dd></dl>

</div>
</div><p>
<a class="anchor" name="0db0bdf595bb6b05e61e4a2c1100414f"></a><!-- doxytag: member="BasicCCModule::setErrorMsg" ref="0db0bdf595bb6b05e61e4a2c1100414f" args="($errorCode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::setErrorMsg           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>errorCode</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$errorCode</em>&nbsp;</td><td>error code contstant from paycardLib.php</td></tr>
  </table>
</dl>
Set $CORE_LOCAL-&gt;["boxMsg"] appropriately for the given error code. I find this easier than manually setting an appropriate message every time I return a common error like PaycardLib::PAYCARD_ERR_NOSEND. I think everything but PaycardLib::PAYCARD_ERR_PROC can have one default message assigned here 
</div>
</div><p>
<a class="anchor" name="6f7b2ad9c70f2eb17d1eca04c20c797f"></a><!-- doxytag: member="BasicCCModule::setPAN" ref="6f7b2ad9c70f2eb17d1eca04c20c797f" args="($in)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::setPAN           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>in</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Store card data in class member $trans_pan. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$in</em>&nbsp;</td><td>is a keyed array:<ul>
<li>pan is the card number</li><li>tr1 is magnetic stripe track 1, if available</li><li>tr2 is magnetic stripe track 2, if available</li><li>tr3 is magnetic stripe track 3, if available</li></ul>
</td></tr>
  </table>
</dl>
Recommended for credit card modules. Card data can be populated at the last possible moment before calling doSend and expunged again once the request has been submitted to the gateway. 
</div>
</div><p>
<a class="anchor" name="c60b2002a84333a0f8447f8ea951c721"></a><!-- doxytag: member="BasicCCModule::soapify" ref="c60b2002a84333a0f8447f8ea951c721" args="($action, $objs, $namespace=&quot;&quot;, $encode_tags=True)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::soapify           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>objs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>namespace</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>encode_tags</em> = <code>True</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Put objects into a soap envelope <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$action</em>&nbsp;</td><td>top level tag in the soap body </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$objs</em>&nbsp;</td><td>keyed array of values </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$namespace</em>&nbsp;</td><td>include an xmlns attribute </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>soap string </dd></dl>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="f4cb934e3861a5cfcd8d1b0ec231dc30"></a><!-- doxytag: member="BasicCCModule::$SOAP_ENVELOPE_ATTRS" ref="f4cb934e3861a5cfcd8d1b0ec231dc30" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasicCCModule::$SOAP_ENVELOPE_ATTRS<code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> array(
        <span class="stringliteral">"xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\""</span>,
        <span class="stringliteral">"xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\""</span>,
        <span class="stringliteral">"xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\""</span>
        )
</pre></div>Envelope attributes for SOAP. 
</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>fannie/modules/workshop/MercuryReverse/BasicCCModule.php</ul>
<hr size="1"><address style="align: right;"><small>Generated on 11 Sep 2014 for CORE POS - Fannie by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
